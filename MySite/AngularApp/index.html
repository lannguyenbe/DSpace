<!doctype html>
<html ng-app="typaApp">
<head>
  <meta charset="utf-8">
  <title>Type Ahead</title>
  <link rel="stylesheet" type="text/css" href="css/typa.css" />
  <script src="angular/1.3.10/angular.js"></script>
  <script src="angular/1.3.10/angular-resource.js"></script>
  <script src="angular/1.3.10/angular-resource.js"></script>
  <script>
    var app = angular.module('typaApp', ['ngResource']);
    //
    // App
    app.run(['$rootScope', function($rootScope) { 
      $rootScope.endPoint = 'http://localhost:8070/rs/service'
//      $rootScope.endPoint = ''
      $rootScope.resources = {
         authors: '/authors/names'
//        authors: 'authors.json'
        ,series: '/communities/titles'
      };
    }]);
    //
    // Controller
    app.controller('AuthorsTypaController', ['$scope', '$rootScope', '$resource', function($scope, $rootScope, $resource) {

      var resource = $resource($rootScope.endPoint + $rootScope.resources.authors);

      function init() {
        $scope.getAuthors();
      }

      $scope.getAuthors = function() {
//        $scope.authorsList = resource.query({pt: ' '}); // tous
          $scope.authorsList = resource.query({pt: $scope.query});
      };

      init();
    }]);
  </script>
</head>
<body>
  <div ng-controller="AuthorsTypaController">
    <input type="text" ng-model="query" ng-change="getAuthors()"/>

    <div class="typa-container" style="width: 234px; position: absolute; left: 8px; top: 129px; /* display: none; */">
      <div class="typa-item" ng-repeat="author in authorsList.slice(0,4)">
        <span class="typa-icon typa-icon-marker"></span>
        <span class="typa-item-query">{{author.name}}</span>
      </div>
    </div>

<!--
    <ul>
      <li ng-repeat="author in authorsList.slice(0,4)">{{author.name}}</li>
    </ul>
  </div>
-->  
<!--
  <div ng-controller="SeriesTypaController">
    <input type="text" ng-model="query" ng-change="getSeries()"/>
    <ul>
      <li ng-repeat="serie in seriesList">{{serie.title}}</li>
    </ul>
  </div>
-->
</body>
</html>